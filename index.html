<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Valentine's Surprise Animation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600&family=Fredoka+One&display=swap');

        body {
            background-color: #fff5f5;
            overflow: hidden;
            font-family: 'Poppins', sans-serif;
            height: 100vh;
            width: 100vw;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            touch-action: none;
            transition: background-color 0.5s ease;
            position: fixed;
        }

        .cursive {
            font-family: 'Dancing Script', cursive;
        }

        .toast-font {
            font-family: 'Fredoka One', cursive;
            letter-spacing: 1px;
        }

        .heart {
            position: absolute;
            color: #ff4d6d;
            pointer-events: none;
            animation: float 4s linear forwards;
            z-index: 10;
        }

        @keyframes float {
            0% { transform: translateY(100vh) scale(0); opacity: 1; }
            100% { transform: translateY(-10vh) scale(1); opacity: 0; }
        }

        .hidden { display: none; }

        #main-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 3px solid #ffb3c1;
            box-shadow: 0 15px 40px rgba(255, 77, 109, 0.3);
            transition: all 0.5s ease;
            position: relative;
            z-index: 20;
            user-select: none;
        }

        .btn-yes {
            background: #ff4d6d;
            transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .btn-no {
            background: #6c757d;
            z-index: 2000; /* Increased to stay above toast if needed */
            position: fixed; 
            touch-action: none;
            left: 50%;
            top: 75%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            transition: none !important; 
            display: block !important; 
            visibility: visible !important;
            opacity: 1 !important;
        }

        #toast {
            position: fixed;
            top: 20%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.5);
            background: linear-gradient(135deg, #ff4d6d, #c9184a);
            color: white;
            padding: 20px 40px;
            border-radius: 50px;
            font-size: 1.8rem;
            font-weight: 900;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 15px 50px rgba(201, 24, 74, 0.6);
            text-shadow: 3px 3px 0px rgba(0,0,0,0.1);
            white-space: normal;
            max-width: 90vw;
            text-align: center;
            border: 4px solid white;
        }

        @media (min-width: 768px) {
            #toast { font-size: 2.5rem; padding: 25px 60px; }
        }

        #toast.active {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .teleport-flash {
            animation: flash 0.1s ease-out;
        }
        @keyframes flash {
            0% { opacity: 0; transform: scale(0.8); }
            100% { opacity: 1; transform: scale(1); }
        }
    </style>
</head>
<body>

    <div id="toast" class="toast-font">Pakad ke dikhao! üòÇ</div>

    <div id="heart-container"></div>

    <div id="main-card" class="p-8 md:p-12 rounded-[40px] text-center max-w-sm mx-4">
        <div id="question-section">
            <div id="emoji-header" class="text-7xl mb-4 transition-all duration-300">üíù</div>
            <h1 id="main-heading" class="cursive text-5xl md:text-6xl text-[#ff4d6d] mb-6">Be My Valentine?</h1>
            <p id="sub-heading" class="text-gray-600 font-semibold mb-8">Ek baar 'No' daba ke toh dekho! üòé</p>
            
            <div id="btn-container" class="flex items-center justify-center gap-6" style="min-height: 120px;">
                <button id="yesBtn" class="btn-yes text-white px-10 py-4 rounded-full font-bold text-xl shadow-xl">
                    YES! üòç
                </button>
                <button id="noBtn" class="btn-no text-white px-10 py-4 rounded-full font-bold text-xl shadow-xl">
                    No
                </button>
            </div>
        </div>

        <div id="success-section" class="hidden">
            <div class="text-7xl mb-4 animate-bounce">üíñ</div>
            <h1 class="cursive text-5xl text-[#ff4d6d] mb-4">Uff! Hum Loot Gaye!</h1>
            <p class="text-xl text-gray-700 leading-relaxed mb-6">
                Tumne 'Yes' bola aur dil garden-garden ho gaya! üåπ<br>
                <span class="font-bold text-[#ff4d6d] text-2xl">"Ab hum tumhare, aur tum hamare!"</span>
            </p>
            <div class="text-md text-gray-500 italic font-medium">Party toh banti hai! üç´ü•Ç</div>
        </div>
    </div>

    <script>
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const mainCard = document.getElementById('main-card');
        const questionSection = document.getElementById('question-section');
        const successSection = document.getElementById('success-section');
        const heartContainer = document.getElementById('heart-container');
        const toast = document.getElementById('toast');
        const emojiHeader = document.getElementById('emoji-header');

        const messages = [
            "NA MANBU! HAMAR JAAN NA HAU ! üòÇ",
            "Kya itna bura hu main MaIN? ü•∫",
            "JAAN LEBU KA NA BOLKE ! üî™üòÇ",
            "Aye haye! Itna nakhra? Bihar se hain hum! üí™",
            "Ka ho? 'No' daba ke collector banbu ka? üé©",
            "Humara dil hai, koi ludo ka board nahi! üé≤",
            "Pakad ke dikhao tab manenge! üèÉ‚Äç‚ôÇÔ∏èüí®",
            "Abhi toh game shuru hua hai babu! üéÆ",
            "Itna ignore? Thappad se darr nahi lagta, No se lagta hai! üñêÔ∏è",
            "Mummy ko bol denge ki tum mana kar rahi ho! üì±",
            "Zindagi bhar 'No' ke peeche bhagoge kya? ‚ôæÔ∏è",
            "Ye 'No' button UFO hai, haath nahi aayega! üõ∏",
            "Ek baar 'Yes' bol do, samosa khilayenge! ü•ü",
            "Dil todne ka jurmana lagega ab! üí∞",
            "Arey! Udhar nahi, idhar 'Yes' hai! üëâüòç",
            "Hum ziddi hain, aur ye button usse bhi zyada! üî•",
            "Bas karo pagli, ab 'Yes' bhi bol do! üòò"
        ];

        const bgColors = ['#fff5f5', '#fff0f3', '#ffe5ec', '#ffccd5', '#ffb3c1'];
        const emojis = ['üíù', 'üòú', 'üò§', 'ü§£', 'üòè', 'üòé', 'ü•∞', 'üòµ‚Äçüí´', 'üî•', 'üåπ'];

        let noMoveCount = 0;
        let toastTimeout;

        function showToast() {
            clearTimeout(toastTimeout);
            toast.innerText = messages[noMoveCount % messages.length];
            toast.classList.add('active');
            
            toastTimeout = setTimeout(() => {
                toast.classList.remove('active');
            }, 8000); 
        }

        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.innerHTML = '‚ù§Ô∏è';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.fontSize = (Math.random() * 25 + 15) + 'px';
            heart.style.animationDuration = (Math.random() * 3 + 2) + 's';
            heartContainer.appendChild(heart);
            setTimeout(() => heart.remove(), 4000);
        }

        setInterval(createHeart, 300);

        const teleportNoButton = (e) => {
            if(e) { e.preventDefault(); e.stopPropagation(); }
            
            noMoveCount++;
            document.body.style.backgroundColor = bgColors[noMoveCount % bgColors.length];
            emojiHeader.innerText = emojis[noMoveCount % emojis.length];

            showToast();

            const margin = 70; 
            const btnWidth = noBtn.offsetWidth || 100;
            const btnHeight = noBtn.offsetHeight || 50;
            
            const screenW = window.innerWidth;
            const screenH = window.innerHeight;

            const maxX = screenW - btnWidth - margin;
            const maxY = screenH - btnHeight - margin;

            let newX, newY;
            const cardRect = mainCard.getBoundingClientRect();
            const toastRect = toast.getBoundingClientRect();
            
            let attempts = 0;
            while(attempts < 400) {
                newX = Math.floor(Math.random() * (maxX - margin + 1)) + margin;
                newY = Math.floor(Math.random() * (maxY - margin + 1)) + margin;
                
                // Avoid overlapping with the Main Card
                const isOverlappingCard = (
                    newX < cardRect.right + 40 && 
                    newX + btnWidth > cardRect.left - 40 &&
                    newY < cardRect.bottom + 40 && 
                    newY + btnHeight > cardRect.top - 40
                );

                // Avoid overlapping with the Toast message (so it's always visible)
                const isOverlappingToast = (
                    toast.classList.contains('active') &&
                    newX < toastRect.right + 20 &&
                    newX + btnWidth > toastRect.left - 20 &&
                    newY < toastRect.bottom + 20 &&
                    newY + btnHeight > toastRect.top - 20
                );
                
                if (!isOverlappingCard && !isOverlappingToast) break;
                attempts++;
            }

            noBtn.style.position = 'fixed';
            noBtn.style.zIndex = '2000'; // Higher than toast
            noBtn.style.left = `${newX}px`;
            noBtn.style.top = `${newY}px`;
            noBtn.style.transform = 'none'; 
            noBtn.style.display = 'block';
            noBtn.style.opacity = '1';
            noBtn.style.visibility = 'visible';
            
            noBtn.classList.remove('teleport-flash');
            void noBtn.offsetWidth; 
            noBtn.classList.add('teleport-flash');

            const currentScale = parseFloat(yesBtn.style.transform.replace('scale(', '').replace(')', '')) || 1;
            if (currentScale < 1.8) { 
                yesBtn.style.transform = `scale(${currentScale + 0.025})`;
            }
        };

        ['mouseover', 'mouseenter', 'touchstart', 'pointerover', 'mousedown'].forEach(event => {
            noBtn.addEventListener(event, (e) => {
                teleportNoButton(e);
            }, { passive: false });
        });
        
        noBtn.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            teleportNoButton(e);
        });

        yesBtn.addEventListener('click', () => {
            questionSection.classList.add('hidden');
            successSection.classList.remove('hidden');
            toast.classList.remove('active'); 
            noBtn.style.setProperty('display', 'none', 'important'); 
            document.body.style.backgroundColor = '#ffb3c1';
            
            for(let i = 0; i < 250; i++) {
                setTimeout(createHeart, i * 6);
            }
        });

        window.addEventListener('resize', () => {
            if(!questionSection.classList.contains('hidden')) teleportNoButton();
        });
        
        setInterval(() => {
            if (!questionSection.classList.contains('hidden')) {
                const rect = noBtn.getBoundingClientRect();
                const isOffScreen = rect.left < 0 || rect.top < 0 || rect.right > window.innerWidth || rect.bottom > window.innerHeight;
                
                if (noBtn.style.display === 'none' || noBtn.style.visibility === 'hidden' || isOffScreen) {
                    noBtn.style.display = 'block';
                    noBtn.style.visibility = 'visible';
                    noBtn.style.opacity = '1';
                    teleportNoButton();
                }
            }
        }, 500);
    </script>
</body>
</html>
